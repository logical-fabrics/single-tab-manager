# Single Tab Manager - 実装タスク一覧

## 📋 プロジェクト進捗

| フェーズ | ステータス | 完了日 |
|---------|----------|--------|
| 📝 仕様策定・ドキュメント作成 | ✅ 完了 | 2025-10-02 |
| 🏗️ 基本構造の実装 | 🔄 進行中 | - |
| 🧪 テスト・デバッグ | ⏳ 待機中 | - |
| 📦 パッケージング | ⏳ 待機中 | - |

---

## Phase 1: 📝 仕様策定・ドキュメント作成

### ✅ 完了タスク
- [x] プロジェクト要件の整理
- [x] CLAUDE.md 作成（仕様、アーキテクチャ、実装ガイド）
- [x] tasks.md 作成（このファイル）

---

## Phase 2: 🏗️ 基本構造の実装

### 2.1 プロジェクト構造の準備
- [x] ディレクトリ構造の作成
  - [x] `options/` ディレクトリ
  - [x] `icons/` ディレクトリ
- [x] アイコンファイルの準備
  - [x] icon16.png (16x16)
  - [x] icon48.png (48x48)
  - [x] icon128.png (128x128)

### 2.2 Manifest V3 設定
- [x] manifest.json の作成
  - [x] 基本情報（name, version, description）
  - [x] 権限設定（tabs, storage）
  - [x] Service Worker 設定
  - [x] オプションページ設定
  - [x] アイコン設定

### 2.3 バックグラウンド処理（background.js）
- [x] Service Worker の基本構造
- [x] 設定読み込み機能
  - [x] chrome.storage.sync からパターン取得
- [x] タブ監視機能
  - [x] chrome.tabs.onCreated リスナー
  - [x] chrome.tabs.onUpdated リスナー
- [x] URL パターンマッチング
  - [x] 正規表現による URL 判定
  - [x] 複数パターンのサポート
  - [x] エラーハンドリング（無効な正規表現）
- [x] タブ制御ロジック
  - [x] 一致する既存タブの検索
  - [x] 古いタブのクローズ
  - [x] 新しいタブのアクティブ化
- [x] デバッグ・ログ機能
  - [x] console.log でアクション記録

### 2.4 オプション画面（options/）
- [x] options.html の作成
  - [x] テキストエリア（パターン入力）
  - [x] 保存ボタン
  - [x] ヘルプセクション（正規表現の例）
  - [x] ステータス表示（保存成功/失敗）
- [x] options.css の作成
  - [x] レイアウト・デザイン
  - [x] レスポンシブ対応
  - [x] Chrome/Edge ネイティブスタイル調和
- [x] options.js の作成
  - [x] DOM 要素の取得
  - [x] 設定読み込み（chrome.storage.sync.get）
  - [x] 設定保存（chrome.storage.sync.set）
  - [x] バリデーション（正規表現チェック）
  - [x] UI フィードバック（保存完了通知）

---

## Phase 3: 🧪 テスト・デバッグ

### 3.1 基本動作テスト
- [ ] 単一パターンでのタブ制御
  - [ ] 新規タブ作成時の動作確認
  - [ ] URL 更新時の動作確認
  - [ ] 既存タブが正しく閉じられるか
  - [ ] 新しいタブがアクティブになるか
- [ ] 複数パターンの同時使用
  - [ ] 複数パターンが正しく適用されるか
  - [ ] パターン間の干渉がないか

### 3.2 エッジケースのテスト
- [ ] 無効な正規表現の入力
  - [ ] エラーメッセージの表示
  - [ ] 拡張機能が停止しないか
- [ ] パターンが空の場合
  - [ ] 何も制御しない動作確認
- [ ] 同時に複数タブを開いた場合
  - [ ] レースコンディションの確認
  - [ ] 最新タブが正しく残るか
- [ ] 手動でタブを閉じた場合
  - [ ] 想定外の動作がないか

### 3.3 パフォーマンステスト
- [ ] 大量のタブが開いている状態での動作
- [ ] 正規表現のマッチング速度
- [ ] メモリリークの確認

### 3.4 ブラウザ互換性テスト
- [ ] Google Chrome での動作確認
- [ ] Microsoft Edge での動作確認

---

## Phase 4: 📦 パッケージング・ドキュメント整備

### 4.1 パッケージング
- [ ] ZIP ファイルの作成
  - [ ] 不要なファイルの除外（.git, docs, CLAUDE.md）
- [ ] インストールテスト
  - [ ] Chrome でのインストール確認
  - [ ] Edge でのインストール確認

### 4.2 ドキュメント作成
- [ ] README.md の作成
  - [ ] インストール方法
  - [ ] 使い方
  - [ ] スクリーンショット（オプション画面）
  - [ ] 正規表現の例
- [ ] CHANGELOG.md の作成（将来のバージョン管理用）

### 4.3 リリース準備（将来的な一般公開用）
- [ ] Chrome Web Store 用の準備
  - [ ] スクリーンショット（1280x800, 640x400）
  - [ ] プロモーション用画像
  - [ ] 説明文の英語版
- [ ] Edge Add-ons 用の準備
  - [ ] 同様の素材準備

---

## 🐛 既知の課題・TODO

### 優先度: 高
- なし（現時点）

### 優先度: 中
- なし（現時点）

### 優先度: 低
- [ ] ダークモード対応（CSS）
- [ ] パターンごとの有効/無効切り替え
- [ ] 統計情報の表示（閉じたタブ数）

---

## 💡 将来の機能拡張アイデア

### アイデア 1: タブ切り替えモード
- 既存タブを閉じる代わりに、既存タブにフォーカスを移す
- ユーザーがモードを選択できる UI

### アイデア 2: ホワイトリスト/ブラックリスト
- 特定のドメインを除外する機能
- より柔軟なフィルタリング

### アイデア 3: インポート/エクスポート
- パターン設定を JSON ファイルで保存/読み込み
- チーム内での設定共有

### アイデア 4: 統計ダッシュボード
- 閉じたタブ数の記録
- パターンごとの使用頻度
- グラフ表示

---

## 📅 スケジュール（目安）

| フェーズ | 想定工数 | 完了予定 |
|---------|---------|---------|
| Phase 1: 仕様策定 | 0.5日 | ✅ 完了 |
| Phase 2: 実装 | 1-2日 | - |
| Phase 3: テスト | 0.5日 | - |
| Phase 4: パッケージング | 0.5日 | - |
| **合計** | **2.5-3.5日** | - |

---

## 🔧 開発メモ

### セットアップコマンド
```bash
# プロジェクトディレクトリに移動
cd single-tab-manager

# Chrome で拡張機能を読み込む
# chrome://extensions/ → デベロッパーモード ON → パッケージ化されていない拡張機能を読み込む

# Edge で拡張機能を読み込む
# edge://extensions/ → 開発者モード ON → 展開して読み込み
```

### デバッグ方法
```javascript
// background.js でのログ出力
console.log('[Single Tab Manager]', 'Message here');

// Service Worker のコンソールを開く
// chrome://extensions/ → 拡張機能の詳細 → Service Worker の「検証」をクリック
```

### 便利なリンク
- [Chrome Extensions Documentation](https://developer.chrome.com/docs/extensions/)
- [Manifest V3 Migration Guide](https://developer.chrome.com/docs/extensions/mv3/intro/)
- [chrome.tabs API Reference](https://developer.chrome.com/docs/extensions/reference/tabs/)
- [chrome.storage API Reference](https://developer.chrome.com/docs/extensions/reference/storage/)

---

**最終更新日**: 2025-10-02
